<!DOCTYPE html>

<html lang="fr">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>ExplainGraph</title>
    <!-- External libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- App styles -->
    <link href="styles.css" rel="stylesheet" />
</head>

<body>
    <!-- Conteneur principal à 3 colonnes -->
    <div class="extracted-style-1" id="main-layout">
        <!-- Barre de navigation -->
        <div class="extracted-style-2" id="nav-bar">
            <div>
                <h1>ExplainGraph </h1>
            </div>
            <div class="extracted-style-3"><img alt="Description de l'image" height="50" src="./liris.png" /></div>
            <div class="extracted-style-4">
                <a href="https://liris.cnrs.fr/equipe/tweak">About</a>
            </div>
        </div>
        <!-- Fenêtre de connexion -->
        <div id="login-overlay">
            <div id="login-box">
                <h2>Welcome to ExplainGraph !</h2>
                <label for="userId">Enter a user_id to generate a course recommendation and its explanation :</label>
                <input id="userId" placeholder="user_X.0" type="text" autocomplete="off" />
                <!-- Autocomplete dropdown -->
                <ul class="extracted-style-5" id="userId-suggest">
                </ul>

                <!-- General Information (first interface) -->
                <h3 style="margin-top:16px;">General Information</h3>

                <p style="font-size:13px; text-align:left; margin:6px 0 10px;">
                You are invited to participate in a study to evaluate a course recommendation system and the associated explanations. Participation is voluntary, and you may withdraw at any time. Your responses are anonymous and used only for research purposes.
                </p>

                <div style="text-align:left; margin-top:12px;">
                  <label>Age</label>
                  <input id="gi_age" type="number" min="10" max="120" placeholder="Age..." />
                </div>

                <div style="text-align:left; margin-top:12px;">
                  <label>Gender</label>
                  <div class="radioOption"><input type="radio" name="gi_gender" value="Female"> Female</div>
                  <div class="radioOption"><input type="radio" name="gi_gender" value="Male"> Male</div>
                  <div class="radioOption"><input type="radio" name="gi_gender" value="Other"> Other</div>
                  <div class="radioOption"><input type="radio" name="gi_gender" value="Prefer not to say"> Prefer not to say</div>
                </div>

                <div style="text-align:left; margin-top:12px;">
                  <label>Education level</label>
                  <div class="radioOption"><input type="radio" name="gi_edu" value="High school"> High school</div>
                  <div class="radioOption"><input type="radio" name="gi_edu" value="Bachelor"> Bachelor</div>
                  <div class="radioOption"><input type="radio" name="gi_edu" value="Master"> Master</div>
                  <div class="radioOption"><input type="radio" name="gi_edu" value="PhD"> PhD</div>
                  <div class="radioOption">
                    <input type="radio" name="gi_edu" value="Other"> Other:
                    <input id="gi_edu_other" type="text" placeholder="Specify..." style="margin-left:6px;"/>
                  </div>
                </div>

                <div style="text-align:left; margin-top:12px;">
                  <label>Field of study / work</label>
                  <input id="gi_field" type="text" placeholder="e.g., Computer Science" />
                </div>

                <div style="text-align:left; margin-top:12px;">
                  <label>Have you ever used a course recommendation system?</label>
                  <div class="radioOption"><input type="radio" name="gi_usedReco" value="Yes"> Yes</div>
                  <div class="radioOption"><input type="radio" name="gi_usedReco" value="No"> No</div>
                </div>

                <div style="text-align:left; margin-top:12px;">
                  <label>Frequency of e-learning platform use</label>
                  <div class="radioOption"><input type="radio" name="gi_freq" value="Rarely"> Rarely</div>
                  <div class="radioOption"><input type="radio" name="gi_freq" value="Sometimes"> Sometimes</div>
                  <div class="radioOption"><input type="radio" name="gi_freq" value="Often"> Often</div>
                  <div class="radioOption"><input type="radio" name="gi_freq" value="Very often"> Very often</div>
                </div>

                <button class="button" onclick="validateLogin()">Confirm</button>
            </div>
        </div>
        <!-- Zone de contenu principale -->
        <div class="extracted-style-6" id="content-area">
            <!-- Colonne centrale : graphe et contrôles -->
            <div class="extracted-style-7" id="center-panel">
                <div id="affichage-cours"></div>
                <!-- Controle du graphe -->
                <div class="graph-controls">
                    <button class="button" id="resetView"
                        title="Click here to recenter the graph and adjust the zoom">Recenter The Graph</button>
                    <button class="button" id="resetPath"
                        title="Click here to come back to the initial path explanation">Reset Path</button>
                    <input id="node" placeholder="course_xx, user_xx,..." type="text" />
                    <button class="button" onclick="chercherNode()"
                        title="Enter a node's name and click here to show its position in the graph">Find A
                        Node</button>

                    <button class="button" id="exportSvg"
                        title="Export the current graph as SVG in a new tab and start a download automatically">Export
                        SVG</button>
                    <button class="button" onclick="showTextExplain()"
                        title="Click here to reveal the full text explaining this path">Show Full Text Explanation</button>
                    <button class="button" onclick="downloadTextExplain()"
                        title="Export the text explanation to a .txt file">Export Text</button>
                </div>

                <!-- Graphe et boutons navigation -->
                <div id="graphs-container">
                    <button class="navigation extracted-style-8" id="buttonPrecedent">
                    </button>
                    <div id="graph-wrapper">
                        <div class="g" id="graph"></div>
                    </div>
                    <button class="navigation extracted-style-8" id="buttonSuivant"></button>
                </div>
                <!-- Informations sous le graphe -->
                <h3><u>Information about this path : </u></h3>
                <div id="num-chemin"></div>
                <div id="ligne-info-chemin">
                </div>
                <!-- Questions pour chaque chemin -->
                <div id="separateurChemin"></div>
                <div id="formulaire-questions"></div>
                <!-- Popup hover node-->
                <div class="extracted-style-9" id="tooltip">
                </div>
                <!-- Espace pour les questions générales -->
                <div id="separateurGeneral"></div>
                <div id="questionsGenerales"></div>
            </div>
            <!--  Colonne de droite : explication + légende -->
            <div class="extracted-style-10" id="right-panel">
                <!-- Explication textuelle -->
                <h3>Explanation</h3>
                <p id="Explication"></p>
                <!-- Legende des graphes -->
                <h3 style="margin-top:15px;">Legend</h3>
                <div class="legend">
                    <div><span class="node course"></span> course</div>
                    <div><span class="node user"></span> user</div>
                    <div><span class="node competence"></span> competence</div>
                    <div><span class="node interest"></span> interest</div>
                    <div><span class="node language"></span> language</div>
                    <div><span class="edge follows"></span> follows</div>
                    <div><span class="edge interested"></span> interested</div>
                    <div><span class="edge requires"></span> requires</div>
                    <div><span class="edge teaches"></span> teaches</div>
                    <div><span class="edge has"></span> has</div>
                </div>

                <!-- Charts -->
                <h3 style="margin-top:15px;">Top 5 Attributes</h3>
                <p style="font-size:13px;">
                    Proportion (in %) of the nodes in this path that share the same
                    attributes as the recommended course. This chart only shows the top 5, non-zero percentages.</p>
                <div id="messageTop5"></div>
                <canvas height="200" id="top5chart" width="260"></canvas>
            </div>
        </div>
    </div>
    <!-- Loader -->
    <div id="loader" class="loader-overlay" style="display: none;">
        <div class="spinner"></div>
    </div>
    <!-- App script -->
    <script src="app.js"></script>
</body>

</html>
